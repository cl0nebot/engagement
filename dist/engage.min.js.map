{"version":3,"sources":["webpack:///engage.min.js","webpack:///webpack/bootstrap a0ea37d4ce27ca818c6f?f149","webpack:///./src/index.js?9552","webpack:///./src/base/index.js?d841","webpack:///./src/base/engage.js?dd44","webpack:///./src/metrics/index.js?27ae","webpack:///./src/metrics/Manager.js?6c59","webpack:///./src/tracking/index.js?f9c1","webpack:///./src/tracking/Scroll.js?cb42","webpack:///./src/utils/index.js?d310","webpack:///./src/utils/Utils.js?24b5","webpack:///./src/utils/Adapters.js?aa00","webpack:///./src/utils/PubSub.js?5709","webpack:///./src/tracking/Visibility.js?9933","webpack:///./src/tracking/Session.js?16c7"],"names":["engage","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_base","_base2","window","_engage","_engage2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_metrics","_utils","defaults","content","url","options","this","$$","extend","manager","Manager","emitter","toJSON","data","api_key_id","api_key","inspect","JSON","stringify","format","Blob","type","_this","setInterval","navigator","sendBeacon","run","Error","element","get","set","val","_Manager","_Manager2","_tracking","timestamp","Date","toISOString","pubsub","PubSub","scroll","Scroll","session","Session","visibility","Visibility","startTracking","addEventListener","publish","document","Adapters","vchange","session_id","referrer","x_pos","xPos","y_pos","yPos","top","bottom","word_count","is_visible","source_url","in_viewport","elementInViewport","_Scroll","_Scroll2","_Visibility","_Visibility2","_Session","_Session2","viewportChecks","setScrollCalc","setContentElements","update","subscribe","pageYOffset","scrollCalc","pageXOffset","documentElement","scrollTop","scrollLeft","body","self","elements","querySelectorAll","keys","forEach","innerHTML","replace","split","push","getBoundingClientRect","inBounds","el","rect","right","left","innerWidth","clientWidth","innerHeight","clientHeight","_scrollCalc","elementsInViewport","some","_Utils","_Utils2","_Adapters","_Adapters2","_PubSub","_PubSub2","_extends","assign","arguments","source","hasOwnProperty","obj1","obj2","create","vhidden","hidden","mozHidden","msHidden","webkitHidden","handlers","event","handler","context","ctx","bind","sessionId","URL","sessionStorage","getItem","newId","idTemplate","setItem","match","location","hostname","Math","random","toString","substr","now"],"mappings":"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","file":"engage.min.js","sourcesContent":["var engage =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _base = __webpack_require__(1);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.engage = _base2.default;\n\tmodule.exports = _base2.default;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _engage = __webpack_require__(2);\n\t\n\tvar _engage2 = _interopRequireDefault(_engage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = _engage2.default;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _metrics = __webpack_require__(3);\n\t\n\tvar _utils = __webpack_require__(7);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar instance = null;\n\tvar defaults = {\n\t  content: 'application/vnd.engage.api+json; charset=UTF-8',\n\t  url: 'http://api.engage.dev/v1/metrics'\n\t};\n\t\n\tvar engage = function () {\n\t  function engage(options) {\n\t    _classCallCheck(this, engage);\n\t\n\t    if (!instance) {\n\t      instance = this;\n\t    }\n\t    this.options = _utils.$$.extend(defaults, options);\n\t    this.manager = new _metrics.Manager(options);\n\t    this.emitter();\n\t  }\n\t\n\t  engage.prototype.toJSON = function toJSON() {\n\t    var data = _utils.$$.extend({ api_key_id: this.options.api_key }, this.manager.inspect());\n\t    return JSON.stringify({ data: data });\n\t  };\n\t\n\t  engage.prototype.format = function format() {\n\t    return new window.Blob([this.toJSON()], { type: this.options.content });\n\t  };\n\t\n\t  engage.prototype.emitter = function emitter() {\n\t    var _this = this;\n\t\n\t    setInterval(function () {\n\t      window.navigator.sendBeacon(_this.options.url, _this.format());\n\t    }, 2000);\n\t  };\n\t\n\t  engage.run = function run(options) {\n\t    if (!options) {\n\t      throw new Error('No options passed');\n\t    }\n\t    if (!options.api_key) {\n\t      throw new Error('No API Key passed');\n\t    }\n\t    if (!options.element) {\n\t      throw new Error('No element option passed');\n\t    }\n\t    return new engage(options); // eslint-disable-line new-cap\n\t  };\n\t\n\t  _createClass(engage, null, [{\n\t    key: 'instance',\n\t    get: function get() {\n\t      if (!instance) {\n\t        throw new Error('Engage is not running');\n\t      }\n\t      return instance;\n\t    },\n\t    set: function set(val) {\n\t      if (instance) {\n\t        instance = val;\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return engage;\n\t}();\n\t\n\tmodule.exports = engage;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Manager = __webpack_require__(4);\n\t\n\tvar _Manager2 = _interopRequireDefault(_Manager);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = { Manager: _Manager2.default };\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _tracking = __webpack_require__(5);\n\t\n\tvar _utils = __webpack_require__(7);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Manager = function () {\n\t  function Manager(options) {\n\t    _classCallCheck(this, Manager);\n\t\n\t    this.options = options;\n\t    this.timestamp = new Date().toISOString();\n\t    this.pubsub = new _utils.PubSub();\n\t    this.scroll = new _tracking.Scroll(options.element);\n\t    this.session = new _tracking.Session();\n\t    this.visibility = new _tracking.Visibility();\n\t    this.startTracking();\n\t  }\n\t\n\t  Manager.prototype.startTracking = function startTracking() {\n\t    var _this = this;\n\t\n\t    window.addEventListener('scroll', function () {\n\t      return _this.pubsub.publish('Scroll');\n\t    });\n\t    document.addEventListener(_utils.Adapters.vchange, function () {\n\t      return _this.pubsub.publish('Visibility');\n\t    }, false);\n\t  };\n\t\n\t  Manager.prototype.inspect = function inspect() {\n\t    return {\n\t      timestamp: this.timestamp,\n\t      session_id: this.session.session_id,\n\t      referrer: this.session.referrer,\n\t      x_pos: this.scroll.xPos,\n\t      y_pos: this.scroll.yPos,\n\t      top: this.scroll.top,\n\t      bottom: this.scroll.bottom,\n\t      word_count: this.scroll.word_count,\n\t      is_visible: this.visibility.is_visible,\n\t      source_url: this.session.source_url,\n\t      in_viewport: this.scroll.elementInViewport\n\t    };\n\t  };\n\t\n\t  return Manager;\n\t}();\n\t\n\tmodule.exports = Manager;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Scroll = __webpack_require__(6);\n\t\n\tvar _Scroll2 = _interopRequireDefault(_Scroll);\n\t\n\tvar _Visibility = __webpack_require__(11);\n\t\n\tvar _Visibility2 = _interopRequireDefault(_Visibility);\n\t\n\tvar _Session = __webpack_require__(12);\n\t\n\tvar _Session2 = _interopRequireDefault(_Session);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = { Scroll: _Scroll2.default, Visibility: _Visibility2.default, Session: _Session2.default };\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(7);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Scroll = function () {\n\t  function Scroll(element) {\n\t    _classCallCheck(this, Scroll);\n\t\n\t    this.word_count = 0;\n\t    this.viewportChecks = [];\n\t    this.setScrollCalc();\n\t    this.setContentElements(element);\n\t    this.update();\n\t    this.pubsub = new _utils.PubSub();\n\t    this.pubsub.subscribe('Scroll', this.update, this);\n\t  }\n\t\n\t  Scroll.prototype.setScrollCalc = function setScrollCalc() {\n\t    if (typeof window.pageYOffset !== 'undefined') {\n\t      this.scrollCalc = function () {\n\t        return [window.pageXOffset, window.pageYOffset];\n\t      };\n\t    } else if (typeof document.documentElement.scrollTop !== 'undefined' && document.documentElement.scrollTop > 0) {\n\t      this.scrollCalc = function () {\n\t        return [document.documentElement.scrollLeft, document.documentElement.scrollTop];\n\t      };\n\t    } else if (typeof document.body.scrollTop !== 'undefined') {\n\t      this.scrollCalc = function () {\n\t        return [document.body.scrollLeft, document.body.scrollTop];\n\t      };\n\t    } else {\n\t      throw new Error('Not Supported');\n\t    }\n\t  };\n\t\n\t  Scroll.prototype.setContentElements = function setContentElements(element) {\n\t    var self = this;\n\t    var elements = document.querySelectorAll(element);\n\t    if (elements.length === 0) {\n\t      throw new Error('No Elements Found');\n\t    } else {\n\t      Object.keys(elements).forEach(function (key) {\n\t        self.word_count += elements[key].innerHTML.replace(/<\\/?[^>]+(>|$)/g, '').split(' ').length;\n\t        self.viewportChecks.push(elements[key]);\n\t      });\n\t      self.top = elements[0].getBoundingClientRect().top;\n\t      self.bottom = elements[elements.length - 1].getBoundingClientRect().bottom;\n\t    }\n\t  };\n\t\n\t  Scroll.inBounds = function inBounds(el) {\n\t    var rect = el.getBoundingClientRect();\n\t    return rect.bottom > 0 && rect.right > 0 && rect.left < (window.innerWidth || document.documentElement.clientWidth) && rect.top < (window.innerHeight || document.documentElement.clientHeight);\n\t  };\n\t\n\t  Scroll.prototype.update = function update() {\n\t    var _scrollCalc = this.scrollCalc();\n\t\n\t    this.xPos = _scrollCalc[0];\n\t    this.yPos = _scrollCalc[1];\n\t\n\t    this.elementInViewport = this.elementsInViewport();\n\t  };\n\t\n\t  Scroll.prototype.elementsInViewport = function elementsInViewport() {\n\t    return this.viewportChecks.some(function (el) {\n\t      return Scroll.inBounds(el);\n\t    });\n\t  };\n\t\n\t  return Scroll;\n\t}();\n\t\n\tmodule.exports = Scroll;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Utils = __webpack_require__(8);\n\t\n\tvar _Utils2 = _interopRequireDefault(_Utils);\n\t\n\tvar _Adapters = __webpack_require__(9);\n\t\n\tvar _Adapters2 = _interopRequireDefault(_Adapters);\n\t\n\tvar _PubSub = __webpack_require__(10);\n\t\n\tvar _PubSub2 = _interopRequireDefault(_PubSub);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tmodule.exports = { $$: _Utils2.default, Adapters: _Adapters2.default, PubSub: _PubSub2.default };\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar $$ = function () {\n\t  function $$() {\n\t    _classCallCheck(this, $$);\n\t  }\n\t\n\t  $$.extend = function extend(obj1, obj2) {\n\t    return _extends(Object.create(Object.prototype), obj1, obj2);\n\t  };\n\t\n\t  return $$;\n\t}();\n\t\n\tmodule.exports = $$;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar vhidden = void 0;\n\tvar vchange = void 0;\n\t\n\tif (typeof document.hidden !== 'undefined') {\n\t  // Opera 12.10 and Firefox 18 and later support\n\t  vhidden = 'hidden';\n\t  vchange = 'visibilitychange';\n\t} else if (typeof document.mozHidden !== 'undefined') {\n\t  vhidden = 'mozHidden';\n\t  vchange = 'mozvisibilitychange';\n\t} else if (typeof document.msHidden !== 'undefined') {\n\t  vhidden = 'msHidden';\n\t  vchange = 'msvisibilitychange';\n\t} else if (typeof document.webkitHidden !== 'undefined') {\n\t  vhidden = 'webkitHidden';\n\t  vchange = 'webkitvisibilitychange';\n\t}\n\t\n\tmodule.exports = { vhidden: vhidden, vchange: vchange };\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar handlers = [];\n\t\n\tvar PubSub = function () {\n\t  function PubSub() {\n\t    _classCallCheck(this, PubSub);\n\t\n\t    this.handlers = handlers;\n\t  }\n\t\n\t  PubSub.prototype.subscribe = function subscribe(event, handler, context) {\n\t    var ctx = typeof context === 'undefined' ? handler : context;\n\t    this.handlers.push({ event: event, handler: handler.bind(ctx) });\n\t  };\n\t\n\t  PubSub.prototype.publish = function publish(event) {\n\t    var i = void 0;\n\t    for (i = 0; i < this.handlers.length; i += 1) {\n\t      if (this.handlers[i].event === event) {\n\t        this.handlers[i].handler.call();\n\t      }\n\t    }\n\t  };\n\t\n\t  return PubSub;\n\t}();\n\t\n\tmodule.exports = PubSub;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _utils = __webpack_require__(7);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Visibility = function () {\n\t  function Visibility() {\n\t    _classCallCheck(this, Visibility);\n\t\n\t    this.is_visible = true;\n\t    this.pubsub = new _utils.PubSub();\n\t    this.pubsub.subscribe('Visibility', this.update, this);\n\t  }\n\t\n\t  Visibility.prototype.update = function update() {\n\t    this.is_visible = window.document[_utils.Adapters.vhidden];\n\t  };\n\t\n\t  return Visibility;\n\t}();\n\t\n\tmodule.exports = Visibility;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Session = function () {\n\t  function Session() {\n\t    _classCallCheck(this, Session);\n\t\n\t    this.session_id = Session.sessionId();\n\t    this.referrer = Session.referrer();\n\t    this.source_url = document.URL.replace(/\\/$/, '');\n\t  }\n\t\n\t  Session.sessionId = function sessionId() {\n\t    var sessionId = window.sessionStorage.getItem('__engage_session');\n\t    if (sessionId == null) {\n\t      var newId = Session.idTemplate();\n\t      window.sessionStorage.setItem('__engage_session', newId);\n\t      return newId;\n\t    }\n\t    return sessionId;\n\t  };\n\t\n\t  Session.referrer = function referrer() {\n\t    var url = document.referrer.replace(/\\/$/, '');\n\t    return url.match(location.hostname) ? url : '';\n\t  };\n\t\n\t  Session.idTemplate = function idTemplate() {\n\t    return '_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();\n\t  };\n\t\n\t  return Session;\n\t}();\n\t\n\tmodule.exports = Session;\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// engage.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a0ea37d4ce27ca818c6f","import engage from './base';\n\nwindow.engage = engage;\nmodule.exports = engage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import engage from './engage';\n\nmodule.exports = engage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/index.js","import { Manager } from '../metrics';\nimport { $$ } from '../utils';\n\nlet instance = null;\nconst defaults = {\n  content: 'application/vnd.engage.api+json; charset=UTF-8',\n  url: 'http://api.engage.dev/v1/metrics',\n};\n\nclass engage {\n\n  constructor(options) {\n    if (!instance) { instance = this; }\n    this.options = $$.extend(defaults, options);\n    this.manager = new Manager(options);\n    this.emitter();\n  }\n\n  toJSON() {\n    const data = $$.extend({ api_key_id: this.options.api_key }, this.manager.inspect());\n    return JSON.stringify({ data });\n  }\n\n  format() {\n    return new window.Blob([this.toJSON()], { type: this.options.content });\n  }\n\n  emitter() {\n    setInterval(() => {\n      window.navigator.sendBeacon(this.options.url, this.format());\n    }, 2000);\n  }\n\n  static get instance() {\n    if (!instance) { throw new Error('Engage is not running'); }\n    return instance;\n  }\n\n  static set instance(val) {\n    if (instance) { instance = val; }\n  }\n\n  static run(options) {\n    if (!options) { throw new Error('No options passed'); }\n    if (!options.api_key) { throw new Error('No API Key passed'); }\n    if (!options.element) { throw new Error('No element option passed'); }\n    return new engage(options); // eslint-disable-line new-cap\n  }\n}\n\nmodule.exports = engage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/engage.js","import Manager from './Manager';\n\nmodule.exports = { Manager };\n\n\n\n// WEBPACK FOOTER //\n// ./src/metrics/index.js","import { Scroll, Session, Visibility } from '../tracking';\nimport { Adapters, PubSub } from '../utils/';\n\nclass Manager {\n\n  constructor(options) {\n    this.options = options;\n    this.timestamp = new Date().toISOString();\n    this.pubsub = new PubSub();\n    this.scroll = new Scroll(options.element);\n    this.session = new Session();\n    this.visibility = new Visibility();\n    this.startTracking();\n  }\n\n  startTracking() {\n    window.addEventListener('scroll', () => this.pubsub.publish('Scroll'));\n    document.addEventListener(Adapters.vchange, () => this.pubsub.publish('Visibility'), false);\n  }\n\n  inspect() {\n    return {\n      timestamp: this.timestamp,\n      session_id: this.session.session_id,\n      referrer: this.session.referrer,\n      x_pos: this.scroll.xPos,\n      y_pos: this.scroll.yPos,\n      top: this.scroll.top,\n      bottom: this.scroll.bottom,\n      word_count: this.scroll.word_count,\n      is_visible: this.visibility.is_visible,\n      source_url: this.session.source_url,\n      in_viewport: this.scroll.elementInViewport,\n    };\n  }\n\n}\n\nmodule.exports = Manager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/metrics/Manager.js","import Scroll from './Scroll';\nimport Visibility from './Visibility';\nimport Session from './Session';\n\nmodule.exports = { Scroll, Visibility, Session };\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/index.js","import { PubSub } from '../utils/';\n\nclass Scroll {\n\n  constructor(element) {\n    this.word_count = 0;\n    this.viewportChecks = [];\n    this.setScrollCalc();\n    this.setContentElements(element);\n    this.update();\n    this.pubsub = new PubSub();\n    this.pubsub.subscribe('Scroll', this.update, this);\n  }\n\n  setScrollCalc() {\n    if (typeof window.pageYOffset !== 'undefined') {\n      this.scrollCalc = () =>\n        ([window.pageXOffset, window.pageYOffset]);\n    } else if (typeof document.documentElement.scrollTop !== 'undefined' &&\n    document.documentElement.scrollTop > 0) {\n      this.scrollCalc = () =>\n        ([document.documentElement.scrollLeft, document.documentElement.scrollTop]);\n    } else if (typeof document.body.scrollTop !== 'undefined') {\n      this.scrollCalc = () =>\n        ([document.body.scrollLeft, document.body.scrollTop]);\n    } else {\n      throw new Error('Not Supported');\n    }\n  }\n\n  setContentElements(element) {\n    const self = this;\n    const elements = document.querySelectorAll(element);\n    if (elements.length === 0) {\n      throw new Error('No Elements Found');\n    } else {\n      Object.keys(elements).forEach((key) => {\n        self.word_count += elements[key].innerHTML.replace(/<\\/?[^>]+(>|$)/g, '').split(' ').length;\n        self.viewportChecks.push(elements[key]);\n      });\n      self.top = elements[0].getBoundingClientRect().top;\n      self.bottom = elements[elements.length - 1].getBoundingClientRect().bottom;\n    }\n  }\n\n  static inBounds(el) {\n    const rect = el.getBoundingClientRect();\n    return rect.bottom > 0 &&\n      rect.right > 0 &&\n      rect.left < (window.innerWidth || document.documentElement.clientWidth) &&\n      rect.top < (window.innerHeight || document.documentElement.clientHeight);\n  }\n\n  update() {\n    [this.xPos, this.yPos] = this.scrollCalc();\n    this.elementInViewport = this.elementsInViewport();\n  }\n\n  elementsInViewport() {\n    return this.viewportChecks.some(el => Scroll.inBounds(el));\n  }\n}\n\nmodule.exports = Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/Scroll.js","import $$ from './Utils';\nimport Adapters from './Adapters';\nimport PubSub from './PubSub';\n\nmodule.exports = { $$, Adapters, PubSub };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","class $$ {\n\n  static extend(obj1, obj2) {\n    return Object.assign(Object.create(Object.prototype), obj1, obj2);\n  }\n\n}\n\nmodule.exports = $$;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Utils.js","let vhidden;\nlet vchange;\n\nif (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support\n  vhidden = 'hidden';\n  vchange = 'visibilitychange';\n} else if (typeof document.mozHidden !== 'undefined') {\n  vhidden = 'mozHidden';\n  vchange = 'mozvisibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  vhidden = 'msHidden';\n  vchange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  vhidden = 'webkitHidden';\n  vchange = 'webkitvisibilitychange';\n}\n\nmodule.exports = { vhidden, vchange };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Adapters.js","const handlers = [];\n\nclass PubSub {\n\n  constructor() {\n    this.handlers = handlers;\n  }\n\n  subscribe(event, handler, context) {\n    const ctx = (typeof context === 'undefined') ? handler : context;\n    this.handlers.push({ event, handler: handler.bind(ctx) });\n  }\n\n  publish(event) {\n    let i;\n    for (i = 0; i < this.handlers.length; i += 1) {\n      if (this.handlers[i].event === event) {\n        this.handlers[i].handler.call();\n      }\n    }\n  }\n}\n\nmodule.exports = PubSub;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/PubSub.js","import { Adapters, PubSub } from '../utils/';\n\nclass Visibility {\n\n  constructor() {\n    this.is_visible = true;\n    this.pubsub = new PubSub();\n    this.pubsub.subscribe('Visibility', this.update, this);\n  }\n\n  update() {\n    this.is_visible = window.document[Adapters.vhidden];\n  }\n\n}\n\nmodule.exports = Visibility;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/Visibility.js","class Session {\n\n  constructor() {\n    this.session_id = Session.sessionId();\n    this.referrer = Session.referrer();\n    this.source_url = document.URL.replace(/\\/$/, '');\n  }\n\n  static sessionId() {\n    const sessionId = window.sessionStorage.getItem('__engage_session');\n    if (sessionId == null) {\n      const newId = Session.idTemplate();\n      window.sessionStorage.setItem('__engage_session', newId);\n      return newId;\n    }\n    return sessionId;\n  }\n\n  static referrer() {\n    const url = document.referrer.replace(/\\/$/, '');\n    return url.match(location.hostname) ? url : '';\n  }\n\n  static idTemplate() {\n    return `_${Math.random().toString(36).substr(2, 9)}_${Date.now()}`;\n  }\n\n}\n\nmodule.exports = Session;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/Session.js"],"sourceRoot":""}