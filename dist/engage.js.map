{"version":3,"sources":["webpack:///webpack/bootstrap babe523bd5ed83ef2ade","webpack:///./src/index.js","webpack:///./src/base/index.js","webpack:///./src/base/engage.js","webpack:///./src/metrics/index.js","webpack:///./src/metrics/Manager.js","webpack:///./src/tracking/index.js","webpack:///./src/tracking/Scroll.js","webpack:///./src/utils/index.js","webpack:///./src/utils/Utils.js","webpack:///./src/utils/Adapters.js","webpack:///./src/utils/PubSub.js","webpack:///./src/tracking/Visibility.js","webpack:///./src/tracking/Session.js"],"names":["window","engage","global","instance","defaults","content","url","options","manager","emitter","toJSON","data","api_key_id","api_key","dimensions","inspect","JSON","stringify","format","Blob","type","setInterval","navigator","sendBeacon","run","Error","element","val","Manager","timestamp","Date","toISOString","pubsub","scroll","session","visibility","startTracking","addEventListener","publish","document","vchange","session_id","referrer","x_pos","xPos","y_pos","yPos","top","bottom","word_count","is_visible","source_url","in_viewport","elementInViewport","Scroll","Visibility","Session","elements","setContentElements","update","subscribe","find","length","getBoundingClientRect","forEach","el","innerHTML","replace","split","scrollCalc","elementsInViewport","inBounds","rect","right","left","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","some","$$","Adapters","PubSub","selector","Array","from","querySelectorAll","pageYOffset","pageXOffset","hidden","vhidden","mozHidden","msHidden","webkitHidden","handlers","event","handler","context","ctx","push","bind","i","call","sessionId","URL","sessionStorage","getItem","newId","idTemplate","setItem","match","location","hostname","Math","random","toString","substr","now"],"mappings":"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","file":"engage.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap babe523bd5ed83ef2ade","import engage from './base';\n\nwindow.engage = engage;\nglobal.engage = engage;\nexport default engage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import engage from './engage';\n\nexport default engage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/index.js","import Manager from '../metrics';\n\nlet instance = null;\nconst defaults = {\n  content: 'application/vnd.engage.api+json; charset=UTF-8',\n  url: 'http://api.engage.dev/v1/metrics',\n};\n\nclass engage {\n\n  constructor(options) {\n    if (!instance) { instance = this; }\n    this.options = Object.assign(defaults, options);\n    this.manager = new Manager(options);\n    this.emitter();\n  }\n\n  toJSON() {\n    const data = Object.assign(\n      { api_key_id: this.options.api_key },\n      this.options.dimensions,\n      this.manager.inspect(),\n    );\n    return JSON.stringify({ data });\n  }\n\n  format() {\n    return new window.Blob([this.toJSON()], {\n      type: this.options.content,\n    });\n  }\n\n  emitter() {\n    setInterval(() => {\n      window.navigator.sendBeacon(this.options.url, this.format());\n    }, 2000);\n  }\n\n  static get instance() {\n    if (!instance) { throw new Error('Engage is not running'); }\n    return instance;\n  }\n\n  static set instance(val) {\n    if (instance) { instance = val; }\n  }\n\n  static run(options) {\n    if (!options) { throw new Error('No options passed'); }\n    if (!options.api_key) { throw new Error('No API Key passed'); }\n    if (!options.element) { throw new Error('No element option passed'); }\n    return new engage(options); // eslint-disable-line new-cap\n  }\n}\n\nexport default engage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/engage.js","import Manager from './Manager';\n\nexport default Manager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/metrics/index.js","import { Scroll, Session, Visibility } from '../tracking';\nimport { Adapters, PubSub } from '../utils/';\n\nclass Manager {\n\n  constructor(options) {\n    this.options = options;\n    this.timestamp = new Date().toISOString();\n    this.pubsub = new PubSub();\n    this.scroll = new Scroll(options.element);\n    this.session = new Session();\n    this.visibility = new Visibility();\n    this.startTracking();\n  }\n\n  startTracking() {\n    window.addEventListener('scroll', () => this.pubsub.publish('Scroll'));\n    document.addEventListener(Adapters.vchange, () => this.pubsub.publish('Visibility'), false);\n  }\n\n  inspect() {\n    return {\n      timestamp: this.timestamp,\n      session_id: this.session.session_id,\n      referrer: this.session.referrer,\n      x_pos: this.scroll.xPos,\n      y_pos: this.scroll.yPos,\n      top: this.scroll.top,\n      bottom: this.scroll.bottom,\n      word_count: this.scroll.word_count,\n      is_visible: this.visibility.is_visible,\n      source_url: this.session.source_url,\n      in_viewport: this.scroll.elementInViewport,\n    };\n  }\n\n}\n\nexport default Manager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/metrics/Manager.js","import Scroll from './Scroll';\nimport Visibility from './Visibility';\nimport Session from './Session';\n\nexport { Scroll, Visibility, Session };\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/index.js","import { $$, Adapters, PubSub } from '../utils/';\n\nlet elements;\n\nclass Scroll {\n\n  constructor(element) {\n    this.setContentElements(element);\n    this.update();\n    this.pubsub = new PubSub();\n    this.pubsub.subscribe('Scroll', this.update, this);\n  }\n\n  setContentElements(element) {\n    elements = $$.find(element);\n    if (elements.length === 0) throw new Error('No Elements Found');\n    this.top = elements[0].getBoundingClientRect().top;\n    this.bottom = elements[elements.length - 1].getBoundingClientRect().bottom;\n    elements.forEach((el) => {\n      this.word_count = (this.word_count || 0) + el.innerHTML.replace(/<\\/?[^>]+(>|$)/g, '').split(' ').length;\n    });\n  }\n\n  update() {\n    [this.xPos, this.yPos] = Adapters.scrollCalc();\n    this.elementInViewport = Scroll.elementsInViewport();\n  }\n\n  static inBounds(el) {\n    const rect = el.getBoundingClientRect();\n    return rect.bottom > 0 &&\n      rect.right > 0 &&\n      rect.left < (window.innerWidth || document.documentElement.clientWidth) &&\n      rect.top < (window.innerHeight || document.documentElement.clientHeight);\n  }\n\n  static elementsInViewport() {\n    return elements.some(el => Scroll.inBounds(el));\n  }\n}\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/Scroll.js","import $$ from './Utils';\nimport Adapters from './Adapters';\nimport PubSub from './PubSub';\n\nexport { $$, Adapters, PubSub };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","class $$ {\n\n  static find(selector) {\n    return Array.from(document.querySelectorAll(selector));\n  }\n\n}\n\nexport default $$;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Utils.js","const Adapters = {};\n\nAdapters.scrollCalc = () => {\n  if (typeof window.pageYOffset === 'undefined') throw new Error('Not Supported');\n  return [window.pageXOffset, window.pageYOffset];\n};\n\nif (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support\n  Adapters.vhidden = 'hidden';\n  Adapters.vchange = 'visibilitychange';\n} else if (typeof document.mozHidden !== 'undefined') {\n  Adapters.vhidden = 'mozHidden';\n  Adapters.vchange = 'mozvisibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  Adapters.vhidden = 'msHidden';\n  Adapters.vchange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  Adapters.vhidden = 'webkitHidden';\n  Adapters.vchange = 'webkitvisibilitychange';\n}\n\nexport default Adapters;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Adapters.js","const handlers = [];\n\nclass PubSub {\n\n  constructor() {\n    this.handlers = handlers;\n  }\n\n  subscribe(event, handler, context) {\n    const ctx = (typeof context === 'undefined') ? handler : context;\n    this.handlers.push({ event, handler: handler.bind(ctx) });\n  }\n\n  publish(event) {\n    let i;\n    for (i = 0; i < this.handlers.length; i += 1) {\n      if (this.handlers[i].event === event) {\n        this.handlers[i].handler.call();\n      }\n    }\n  }\n}\n\nexport default PubSub;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/PubSub.js","import { Adapters, PubSub } from '../utils/';\n\nclass Visibility {\n\n  constructor() {\n    this.is_visible = true;\n    this.pubsub = new PubSub();\n    this.pubsub.subscribe('Visibility', this.update, this);\n  }\n\n  update() {\n    this.is_visible = window.document[Adapters.vhidden];\n  }\n\n}\n\nexport default Visibility;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/Visibility.js","class Session {\n\n  constructor() {\n    this.session_id = Session.sessionId();\n    this.referrer = Session.referrer();\n    this.source_url = document.URL.replace(/\\/$/, '');\n  }\n\n  static sessionId() {\n    const sessionId = window.sessionStorage.getItem('__engage_session');\n    if (sessionId == null) {\n      const newId = Session.idTemplate();\n      window.sessionStorage.setItem('__engage_session', newId);\n      return newId;\n    }\n    return sessionId;\n  }\n\n  static referrer() {\n    const url = document.referrer.replace(/\\/$/, '');\n    return url.match(location.hostname) ? url : '';\n  }\n\n  static idTemplate() {\n    return `_${Math.random().toString(36).substr(2, 9)}_${Date.now()}`;\n  }\n\n}\n\nexport default Session;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tracking/Session.js"],"sourceRoot":""}