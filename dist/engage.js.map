{"version":3,"sources":["webpack:///webpack/bootstrap 6e51916700ff53c38561","webpack:///./src/index.js","webpack:///./src/base/index.js","webpack:///./src/base/engage.js","webpack:///./src/metrics/index.js","webpack:///./src/metrics/Manager.js","webpack:///./src/tracking/index.js","webpack:///./src/tracking/Scroll.js","webpack:///./src/utils/index.js","webpack:///./src/utils/Utils.js","webpack:///./src/utils/Adapters.js","webpack:///./src/utils/PubSub.js","webpack:///./src/tracking/Visibility.js","webpack:///./src/tracking/Session.js"],"names":["window","engage","module","exports","instance","defaults","content","url","options","extend","manager","emitter","toJSON","data","api_key","inspect","JSON","stringify","format","Blob","type","setInterval","navigator","sendBeacon","run","Error","element","val","Manager","timestamp","Date","now","pubsub","scroll","session","visibility","startTracking","addEventListener","publish","document","vchange","session_id","referrer","x_pos","xPos","y_pos","yPos","top","bottom","word_count","is_visible","source_url","in_viewport","elementInViewport","Scroll","Visibility","Session","viewportChecks","setScrollCalc","setContentElements","update","subscribe","pageYOffset","scrollCalc","pageXOffset","documentElement","scrollTop","scrollLeft","body","self","elements","getElementsByClassName","length","Object","keys","forEach","key","innerHTML","replace","split","push","getBoundingClientRect","inBounds","el","rect","right","left","innerWidth","clientWidth","innerHeight","clientHeight","elementsInViewport","some","$$","Adapters","PubSub","obj1","obj2","assign","create","prototype","vhidden","hidden","mozHidden","msHidden","webkitHidden","handlers","event","handler","context","ctx","bind","i","call","sessionId","URL","sessionStorage","getItem","newId","idTemplate","setItem","match","location","hostname","Math","random","toString","substr"],"mappings":"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","file":"engage.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6e51916700ff53c38561\n **/","import engage from './base';\n\nwindow.engage = engage;\nmodule.exports = engage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import engage from './engage';\n\nmodule.exports = engage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base/index.js\n **/","import { Manager } from '../metrics';\nimport { $$ } from '../utils';\n\nlet instance = null;\nconst defaults = {\n  content: 'application/vnd.engage.api+json; charset=UTF-8',\n  url: 'http://api.engage.dev/v1/metrics',\n};\n\nclass engage {\n\n  constructor(options) {\n    if (!instance) { instance = this; }\n    this.options = $$.extend(defaults, options);\n    this.manager = new Manager(options);\n    this.emitter();\n  }\n\n  toJSON() {\n    const data = $$.extend({ api_key: this.options.api_key }, this.manager.inspect());\n    return JSON.stringify({ data });\n  }\n\n  format() {\n    return new Blob(\n      [this.toJSON()], { type: this.options.content }\n    );\n  }\n\n  emitter() {\n    setInterval(() => {\n      window.navigator.sendBeacon(this.options.url, this.format());\n    }, 2000);\n  }\n\n  static get instance() {\n    if (!instance) { throw new Error('Engage is not running'); }\n    return instance;\n  }\n\n  static set instance(val) {\n    if (instance) { instance = val; }\n  }\n\n  static run(options) {\n    if (!options) { throw new Error('No options passed'); }\n    if (!options.api_key) { throw new Error('No API Key passed'); }\n    if (!options.element) { throw new Error('No element option passed'); }\n    return new engage(options); // eslint-disable-line new-cap\n  }\n}\n\nmodule.exports = engage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base/engage.js\n **/","import Manager from './Manager';\n\nmodule.exports = { Manager };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/metrics/index.js\n **/","import { Scroll, Session, Visibility } from '../tracking';\nimport { Adapters, PubSub } from '../utils/';\n\nclass Manager {\n\n  constructor(options) {\n    this.options = options;\n    this.timestamp = Date.now();\n    this.pubsub = new PubSub();\n    this.scroll = new Scroll(options.element);\n    this.session = new Session();\n    this.visibility = new Visibility();\n    this.startTracking();\n  }\n\n  startTracking() {\n    window.addEventListener('scroll', () => this.pubsub.publish('Scroll'));\n    document.addEventListener(Adapters.vchange, () => this.pubsub.publish('Visibility'), false);\n  }\n\n  inspect() {\n    return {\n      timestamp: this.timestamp,\n      session_id: this.session.session_id,\n      referrer: this.session.referrer,\n      x_pos: this.scroll.xPos,\n      y_pos: this.scroll.yPos,\n      top: this.scroll.top,\n      bottom: this.scroll.bottom,\n      word_count: this.scroll.word_count,\n      is_visible: this.visibility.is_visible,\n      source_url: this.session.source_url,\n      in_viewport: this.scroll.elementInViewport,\n    };\n  }\n\n}\n\nmodule.exports = Manager;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/metrics/Manager.js\n **/","import Scroll from './Scroll';\nimport Visibility from './Visibility';\nimport Session from './Session';\n\nmodule.exports = { Scroll, Visibility, Session };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tracking/index.js\n **/","import { PubSub } from '../utils/';\n\nclass Scroll {\n\n  constructor(element) {\n    this.word_count = 0;\n    this.viewportChecks = [];\n    this.setScrollCalc();\n    this.setContentElements(element);\n    this.update();\n    this.pubsub = new PubSub();\n    this.pubsub.subscribe('Scroll', this.update, this);\n  }\n\n  setScrollCalc() {\n    if (typeof window.pageYOffset !== 'undefined') {\n      this.scrollCalc = () =>\n        ([window.pageXOffset, window.pageYOffset]);\n    } else if (typeof document.documentElement.scrollTop !== 'undefined' &&\n    document.documentElement.scrollTop > 0) {\n      this.scrollCalc = () =>\n        ([document.documentElement.scrollLeft, document.documentElement.scrollTop]);\n    } else if (typeof document.body.scrollTop !== 'undefined') {\n      this.scrollCalc = () =>\n        ([document.body.scrollLeft, document.body.scrollTop]);\n    } else {\n      throw new Error('Not Supported');\n    }\n  }\n\n  setContentElements(element) {\n    const self = this;\n    const elements = document.getElementsByClassName(element);\n    if (elements.length === 0) {\n      throw new Error('No Elements Found');\n    } else {\n      Object.keys(elements).forEach((key) => {\n        self.word_count += elements[key].innerHTML.replace(/<\\/?[^>]+(>|$)/g, '').split(' ').length;\n        self.viewportChecks.push(elements[key]);\n      });\n      self.top = elements[0].getBoundingClientRect().top;\n      self.bottom = elements[elements.length - 1].getBoundingClientRect().bottom;\n    }\n  }\n\n  inBounds(el) {\n    const rect = el.getBoundingClientRect();\n    return rect.bottom > 0 &&\n      rect.right > 0 &&\n      rect.left < (window.innerWidth || document.documentElement.clientWidth) &&\n      rect.top < (window.innerHeight || document.documentElement.clientHeight);\n  }\n\n  update() {\n    [this.xPos, this.yPos] = this.scrollCalc();\n    this.elementInViewport = this.elementsInViewport();\n  }\n\n  elementsInViewport() {\n    return this.viewportChecks.some(el => this.inBounds(el));\n  }\n}\n\nmodule.exports = Scroll;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tracking/Scroll.js\n **/","import $$ from './Utils';\nimport Adapters from './Adapters';\nimport PubSub from './PubSub';\n\nmodule.exports = { $$, Adapters, PubSub };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/index.js\n **/","class $$ {\n\n  static extend(obj1, obj2) {\n    return Object.assign(Object.create(Object.prototype), obj1, obj2);\n  }\n\n}\n\nmodule.exports = $$;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/Utils.js\n **/","let vhidden;\nlet vchange;\n\nif (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support\n  vhidden = 'hidden';\n  vchange = 'visibilitychange';\n} else if (typeof document.mozHidden !== 'undefined') {\n  vhidden = 'mozHidden';\n  vchange = 'mozvisibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n  vhidden = 'msHidden';\n  vchange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n  vhidden = 'webkitHidden';\n  vchange = 'webkitvisibilitychange';\n}\n\nmodule.exports = { vhidden, vchange };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/Adapters.js\n **/","const handlers = [];\n\nclass PubSub {\n\n  constructor() {\n    this.handlers = handlers;\n  }\n\n  subscribe(event, handler, context) {\n    const ctx = (typeof context === 'undefined') ? handler : context;\n    this.handlers.push({ event, handler: handler.bind(ctx) });\n  }\n\n  publish(event) {\n    let i;\n    for (i = 0; i < this.handlers.length; i++) {\n      if (this.handlers[i].event === event) {\n        this.handlers[i].handler.call();\n      }\n    }\n  }\n}\n\nmodule.exports = PubSub;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/PubSub.js\n **/","import { Adapters, PubSub } from '../utils/';\n\nclass Visibility {\n\n  constructor() {\n    this.is_visible = true;\n    this.pubsub = new PubSub();\n    this.pubsub.subscribe('Visibility', this.update, this);\n  }\n\n  update() {\n    this.is_visible = window.document[Adapters.vhidden];\n  }\n\n}\n\nmodule.exports = Visibility;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tracking/Visibility.js\n **/","class Session {\n\n  constructor() {\n    this.session_id = this.sessionId();\n    this.referrer = this.referrer();\n    this.source_url = document.URL.replace(/\\/$/, '');\n  }\n\n  sessionId() {\n    const sessionId = window.sessionStorage.getItem('__engage_session');\n    if (sessionId == null) {\n      const newId = this.idTemplate();\n      window.sessionStorage.setItem('__engage_session', newId);\n      return newId;\n    }\n    return sessionId;\n  }\n\n  referrer() {\n    const url = document.referrer.replace(/\\/$/, '');\n    return url.match(location.hostname) ? url : '';\n  }\n\n  idTemplate() {\n    return `_${Math.random().toString(36).substr(2, 9)}_${Date.now()}`;\n  }\n\n}\n\nmodule.exports = Session;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tracking/Session.js\n **/"],"sourceRoot":""}